(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21d557cc"],{"0366":function(e,t,r){var a=r("1c0b");e.exports=function(e,t,r){if(a(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,a){return e.call(t,r,a)};case 3:return function(r,a,s){return e.call(t,r,a,s)}}return function(){return e.apply(t,arguments)}}},"159b":function(e,t,r){var a=r("da84"),s=r("fdbc"),i=r("17c2"),n=r("9112");for(var o in s){var c=a[o],l=c&&c.prototype;if(l&&l.forEach!==i)try{n(l,"forEach",i)}catch(u){l.forEach=i}}},"17c2":function(e,t,r){"use strict";var a=r("b727").forEach,s=r("a640"),i=s("forEach");e.exports=i?[].forEach:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}},"1c0b":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},"1ce5":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mainbox"},[r("el-tabs",{attrs:{value:"first"}},[r("el-tab-pane",{attrs:{label:"xmind导入",name:"first"}},[r("uploadXmind")],1),r("el-tab-pane",{attrs:{label:"手工创建",name:"second"}},[r("div",{staticClass:"main"},[r("div",{staticClass:"header"},[r("p",[e._v("创建测试用例")]),r("el-divider")],1),r("div",{staticClass:"form"},[r("el-form",{ref:"caseForm",attrs:{model:e.caseForm,size:"mini","label-width":"30%",rules:e.caseRules}},[r("el-form-item",{attrs:{label:"用例编号:",prop:"no"}},[r("el-input",{model:{value:e.caseForm.no,callback:function(t){e.$set(e.caseForm,"no",t)},expression:"caseForm.no"}})],1),r("el-form-item",{attrs:{label:"用例名称:",prop:"name"}},[r("el-input",{model:{value:e.caseForm.name,callback:function(t){e.$set(e.caseForm,"name",t)},expression:"caseForm.name"}})],1),r("el-form-item",{attrs:{label:"归属模块:",prop:"module"}},[r("el-cascader",{ref:"cascader",attrs:{options:e.$store.state.modules,expandTrigger:"hover",props:{checkStrictly:!0,emitPath:!1,value:"id",label:"name",children:"subs"},clearable:""},on:{change:e.handleChange},model:{value:e.caseForm.module,callback:function(t){e.$set(e.caseForm,"module",t)},expression:"caseForm.module"}}),r("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:function(t){e.dialogVisible=!0}}})],1),r("el-form-item",{attrs:{label:"优先级:",prop:"priority"}},[r("el-select",{model:{value:e.caseForm.priority,callback:function(t){e.$set(e.caseForm,"priority",t)},expression:"caseForm.priority"}},e._l(e.$store.state.priorities,(function(e){return r("el-option",{key:e[0],attrs:{label:e[1],value:e[0]}})})),1)],1),r("el-form-item",{attrs:{label:"自动化:",prop:"is_auto"}},[r("el-select",{model:{value:e.caseForm.is_auto,callback:function(t){e.$set(e.caseForm,"is_auto",t)},expression:"caseForm.is_auto"}},[r("el-option",{attrs:{label:"是",value:!0}}),r("el-option",{attrs:{label:"否",value:!1}})],1)],1),e.caseForm.is_auto?r("el-form-item",{attrs:{label:"自动化脚本路径:",prop:"path"}},[r("el-input",{model:{value:e.caseForm.path,callback:function(t){e.$set(e.caseForm,"path",t)},expression:"caseForm.path"}})],1):e._e(),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.caseForm.is_auto,expression:"caseForm.is_auto"}],attrs:{label:"自动化版本:"}},[r("el-input",{model:{value:e.caseForm.version,callback:function(t){e.$set(e.caseForm,"version",t)},expression:"caseForm.version"}})],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.caseForm.is_auto,expression:"caseForm.is_auto"}],attrs:{label:"自动化类型:"}},[r("el-input",{model:{value:e.caseForm.type,callback:function(t){e.$set(e.caseForm,"type",t)},expression:"caseForm.type"}})],1),r("el-form-item",{attrs:{label:"用例描述:"}},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:3}},model:{value:e.caseForm.description,callback:function(t){e.$set(e.caseForm,"description",t)},expression:"caseForm.description"}})],1),r("el-form-item",{attrs:{label:"测试步骤:"}},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:5}},model:{value:e.caseForm.step,callback:function(t){e.$set(e.caseForm,"step",t)},expression:"caseForm.step"}})],1),r("el-form-item",{attrs:{label:"预期结果:"}},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:2}},model:{value:e.caseForm.expectation,callback:function(t){e.$set(e.caseForm,"expectation",t)},expression:"caseForm.expectation"}})],1)],1),r("div",{staticClass:"footer"},[r("el-button",{attrs:{size:"mini"},on:{click:function(t){e.caseForm={}}}},[e._v("重 置")]),r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.create_submit()}}},[e._v("保 存")])],1)],1)])])],1),r("el-dialog",{attrs:{title:"新增模块",visible:e.dialogVisible,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"subForm",attrs:{model:e.subForm,"label-width":"25%",size:"mini",rules:e.subRules}},[r("el-form-item",{attrs:{label:"父级模块:"}},[r("el-cascader",{ref:"cascader",attrs:{options:e.improve_modules(),expandTrigger:"hover",props:{checkStrictly:!0,emitPath:!1,value:"id",label:"name",children:"subs"},clearable:""},on:{change:e.handleChange},model:{value:e.subForm.parent,callback:function(t){e.$set(e.subForm,"parent",t)},expression:"subForm.parent"}})],1),r("el-form-item",{attrs:{label:"模块名称:",prop:"name"}},[r("el-input",{model:{value:e.subForm.name,callback:function(t){e.$set(e.subForm,"name",t)},expression:"subForm.name"}})],1)],1),r("div",{staticStyle:{"text-align":"right","margin-top":"2em","margin-right":"1em"}},[r("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.create_module()}}},[e._v("保 存")])],1)],1)],1)},s=[],i=(r("159b"),r("b0c0"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"upload"},[r("div",{staticClass:"clear"},[r("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.$refs.upload.clearFiles()}}},[e._v("清空列表")])],1),r("el-upload",{ref:"upload",staticStyle:{width:"30%","min-height":"8em","margin-bottom":"1em"},attrs:{action:"",multiple:"",accept:".xmind",limit:5,"on-exceed":e.handleLimit,"on-change":e.handleChange,"on-success":e.handleSuccess,"on-error":e.handleError,"http-request":e.handleHttpRequest,"auto-upload":!1}},[r("el-button",{attrs:{slot:"trigger",size:"mini",type:"primary"},slot:"trigger"},[e._v("选取文件")]),r("el-button",{staticStyle:{"margin-left":"2em"},attrs:{size:"mini",type:"success"},on:{click:function(t){return e.submit()}}},[e._v("点击上传")]),r("el-button",{directives:[{name:"show",rawName:"v-show",value:e.ids.length>0,expression:"ids.length > 0"}],staticStyle:{"margin-left":"2em"},attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.$router.push({name:"job_create",params:{ids:e.ids}})}}},[e._v("同步创建任务")]),e.loading?r("span",{staticStyle:{"margin-left":"1em",color:"grey","margin-bottom":"0"}},[r("i",{staticClass:"el-icon-loading",attrs:{slot:"suffix"},slot:"suffix"}),e._v("用例导入中··· ")]):e._e(),r("div",{staticClass:"tips",attrs:{slot:"tip"},slot:"tip"},[e._v("提示: 只能上传xmind文件")])],1),r("transition",{attrs:{name:"el-zoom-in-top"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"result"},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.title.replace(/[\r\n]/g,""),expression:"title.replace(/[\\r\\n]/g,'')"}]},[r("span",{staticClass:"title"},[e._v(e._s(e.title))])]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.error.replace(/[\r\n]/g,""),expression:"error.replace(/[\\r\\n]/g,'')"}]},[r("span",{staticClass:"title"},[r("br"),e._v("导入异常: "),r("br")]),r("span",[e._v(e._s(e.error))])]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.success.replace(/[\r\n]/g,""),expression:"success.replace(/[\\r\\n]/g,'')"}]},[r("span",{staticClass:"title"},[r("br"),e._v("用例详情: "),r("br")]),r("span",[e._v(e._s(e.success))])])])])],1)}),n=[],o=r("1da1"),c=(r("fb6a"),r("a434"),r("a15b"),r("99af"),r("96cf"),r("365c")),l={props:[],data:function(){return{title:"",error:"",success:"",count:0,show:!1,loading:!1,ids:[]}},methods:{handleHttpRequest:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.loading=!0,a=new FormData,a.append("file",e.file),r.next=5,Object(c["A"])(a);case 5:s=r.sent,t.show=!0,t.loading=!1,201==s.status&&e.onSuccess(s),200==s.status&&e.onError(s);case 10:case"end":return r.stop()}}),r)})))()},submit:function(){this.show=!1,this.clearResult(),this.$refs.upload.submit()},handleChange:function(e,t){if("ready"==e.status)for(var r=0;r<t.slice(0,-1).length;r++)if(t[r].name==e.name){this.$message({type:"error",message:"同名的文件已存在"}),t.splice(-1,1);break}},handleLimit:function(){this.$message({type:"warning",message:"上传文件数已达上限"})},handleSuccess:function(e,t,r){this.count+=e.data.count,this.title="导入用例: ".concat(this.count),this.success+=e.data.success.join("\n")+"\n",this.ids=this.ids.concat(e.data.ids),this.$store.dispatch("caseTree")},handleError:function(e,t,r){this.error+=e.data.error+"\n"},clearResult:function(){this.title="",this.error="",this.success="",this.count=0,this.show=!1}}},u=l,m=(r("a887"),r("2877")),f=Object(m["a"])(u,i,n,!1,null,"cd6d6328",null),d=f.exports,p={data:function(){var e=function(e,t,r){t&&Object(c["w"])(null,t).then((function(e){"用例不存在"==e.data.msg&&r(),r(new Error("用例编号已存在"))})),r()};return{caseForm:{},caseRules:{no:[{validator:e,trigger:"blur"}],name:[{required:!0,message:"该项为必填",trigger:"blur"}],module:[{required:!0,message:"该项为必填",trigger:"blur"}],priority:[{required:!0,message:"该项为必填",trigger:"blur"}],is_auto:[{required:!0,message:"该项为必填",trigger:"blur"}],path:[{required:!0,message:"该项为必填",trigger:"blur"}]},dialogVisible:!1,subForm:{},subRules:{name:[{required:!0,message:"该项为必填",trigger:"blur"}]}}},methods:{create_submit:function(){var e=this;this.$refs.caseForm.validate((function(t){t&&Object(c["d"])(e.caseForm).then((function(t){e.$message({type:"success",message:t.data.msg}),e.$store.dispatch("caseTree")}))}))},improve_modules:function(){var e=JSON.parse(JSON.stringify(this.$store.state.modules));return e.forEach((function(e){e.subs&&e.subs.forEach((function(e){e.subs=null}))})),e},create_module:function(){var e=this;this.$refs.subForm.validate((function(t){t&&Object(c["f"])(e.subForm).then((function(t){e.$message({type:"success",message:"模块[".concat(t.data.name,"]创建成功")}),e.subForm={},e.dialogVisible=!1,Object(c["v"])().then((function(t){e.$store.commit("setModules",t.data)}))}))}))},handleChange:function(){this.$refs.cascader.dropDownVisible=!1}},components:{uploadXmind:d}},h=p,b=(r("d8a4"),Object(m["a"])(h,a,s,!1,null,"e5275a5c",null));t["default"]=b.exports},"1dde":function(e,t,r){var a=r("d039"),s=r("b622"),i=r("2d00"),n=s("species");e.exports=function(e){return i>=51||!a((function(){var t=[],r=t.constructor={};return r[n]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"65f0":function(e,t,r){var a=r("861d"),s=r("e8b5"),i=r("b622"),n=i("species");e.exports=function(e,t){var r;return s(e)&&(r=e.constructor,"function"!=typeof r||r!==Array&&!s(r.prototype)?a(r)&&(r=r[n],null===r&&(r=void 0)):r=void 0),new(void 0===r?Array:r)(0===t?0:t)}},8418:function(e,t,r){"use strict";var a=r("c04e"),s=r("9bf2"),i=r("5c6c");e.exports=function(e,t,r){var n=a(t);n in e?s.f(e,n,i(0,r)):e[n]=r}},"99af":function(e,t,r){"use strict";var a=r("23e7"),s=r("d039"),i=r("e8b5"),n=r("861d"),o=r("7b0b"),c=r("50c4"),l=r("8418"),u=r("65f0"),m=r("1dde"),f=r("b622"),d=r("2d00"),p=f("isConcatSpreadable"),h=9007199254740991,b="Maximum allowed index exceeded",v=d>=51||!s((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),g=m("concat"),w=function(e){if(!n(e))return!1;var t=e[p];return void 0!==t?!!t:i(e)},y=!v||!g;a({target:"Array",proto:!0,forced:y},{concat:function(e){var t,r,a,s,i,n=o(this),m=u(n,0),f=0;for(t=-1,a=arguments.length;t<a;t++)if(i=-1===t?n:arguments[t],w(i)){if(s=c(i.length),f+s>h)throw TypeError(b);for(r=0;r<s;r++,f++)r in i&&l(m,f,i[r])}else{if(f>=h)throw TypeError(b);l(m,f++,i)}return m.length=f,m}})},a15b:function(e,t,r){"use strict";var a=r("23e7"),s=r("44ad"),i=r("fc6a"),n=r("a640"),o=[].join,c=s!=Object,l=n("join",",");a({target:"Array",proto:!0,forced:c||!l},{join:function(e){return o.call(i(this),void 0===e?",":e)}})},a434:function(e,t,r){"use strict";var a=r("23e7"),s=r("23cb"),i=r("a691"),n=r("50c4"),o=r("7b0b"),c=r("65f0"),l=r("8418"),u=r("1dde"),m=u("splice"),f=Math.max,d=Math.min,p=9007199254740991,h="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!m},{splice:function(e,t){var r,a,u,m,b,v,g=o(this),w=n(g.length),y=s(e,w),x=arguments.length;if(0===x?r=a=0:1===x?(r=0,a=w-y):(r=x-2,a=d(f(i(t),0),w-y)),w+r-a>p)throw TypeError(h);for(u=c(g,a),m=0;m<a;m++)b=y+m,b in g&&l(u,m,g[b]);if(u.length=a,r<a){for(m=y;m<w-a;m++)b=m+a,v=m+r,b in g?g[v]=g[b]:delete g[v];for(m=w;m>w-a+r;m--)delete g[m-1]}else if(r>a)for(m=w-a;m>y;m--)b=m+a-1,v=m+r-1,b in g?g[v]=g[b]:delete g[v];for(m=0;m<r;m++)g[m+y]=arguments[m+2];return g.length=w-a+r,u}})},a640:function(e,t,r){"use strict";var a=r("d039");e.exports=function(e,t){var r=[][e];return!!r&&a((function(){r.call(null,t||function(){throw 1},1)}))}},a887:function(e,t,r){"use strict";r("b46a")},b0c0:function(e,t,r){var a=r("83ab"),s=r("9bf2").f,i=Function.prototype,n=i.toString,o=/^\s*function ([^ (]*)/,c="name";a&&!(c in i)&&s(i,c,{configurable:!0,get:function(){try{return n.call(this).match(o)[1]}catch(e){return""}}})},b46a:function(e,t,r){},b727:function(e,t,r){var a=r("0366"),s=r("44ad"),i=r("7b0b"),n=r("50c4"),o=r("65f0"),c=[].push,l=function(e){var t=1==e,r=2==e,l=3==e,u=4==e,m=6==e,f=7==e,d=5==e||m;return function(p,h,b,v){for(var g,w,y=i(p),x=s(y),F=a(h,b,3),_=n(x.length),$=0,k=v||o,C=t?k(p,_):r||f?k(p,0):void 0;_>$;$++)if((d||$ in x)&&(g=x[$],w=F(g,$,y),e))if(t)C[$]=w;else if(w)switch(e){case 3:return!0;case 5:return g;case 6:return $;case 2:c.call(C,g)}else switch(e){case 4:return!1;case 7:c.call(C,g)}return m?-1:l||u?u:C}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterOut:l(7)}},c688:function(e,t,r){},d8a4:function(e,t,r){"use strict";r("c688")},e8b5:function(e,t,r){var a=r("c6b6");e.exports=Array.isArray||function(e){return"Array"==a(e)}},fb6a:function(e,t,r){"use strict";var a=r("23e7"),s=r("861d"),i=r("e8b5"),n=r("23cb"),o=r("50c4"),c=r("fc6a"),l=r("8418"),u=r("b622"),m=r("1dde"),f=m("slice"),d=u("species"),p=[].slice,h=Math.max;a({target:"Array",proto:!0,forced:!f},{slice:function(e,t){var r,a,u,m=c(this),f=o(m.length),b=n(e,f),v=n(void 0===t?f:t,f);if(i(m)&&(r=m.constructor,"function"!=typeof r||r!==Array&&!i(r.prototype)?s(r)&&(r=r[d],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return p.call(m,b,v);for(a=new(void 0===r?Array:r)(h(v-b,0)),u=0;b<v;b++,u++)b in m&&l(a,u,m[b]);return a.length=u,a}})}}]);
//# sourceMappingURL=chunk-21d557cc.c83ea9d1.js.map