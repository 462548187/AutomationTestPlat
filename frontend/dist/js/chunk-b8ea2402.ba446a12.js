(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b8ea2402"],{"0366":function(e,t,r){var n=r("1c0b");e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,a){return e.call(t,r,n,a)}}return function(){return e.apply(t,arguments)}}},1276:function(e,t,r){"use strict";var n=r("d784"),a=r("44e7"),i=r("825a"),s=r("1d80"),o=r("4840"),c=r("8aa5"),l=r("50c4"),u=r("14c3"),m=r("9263"),d=r("9f7f"),f=r("d039"),p=d.UNSUPPORTED_Y,h=[].push,v=Math.min,b=4294967295,g=!f((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));n("split",(function(e,t,r){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var n=String(s(this)),i=void 0===r?b:r>>>0;if(0===i)return[];if(void 0===e)return[n];if(!a(e))return t.call(n,e,i);var o,c,l,u=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,p=new RegExp(e.source,d+"g");while(o=m.call(p,n)){if(c=p.lastIndex,c>f&&(u.push(n.slice(f,o.index)),o.length>1&&o.index<n.length&&h.apply(u,o.slice(1)),l=o[0].length,f=c,u.length>=i))break;p.lastIndex===o.index&&p.lastIndex++}return f===n.length?!l&&p.test("")||u.push(""):u.push(n.slice(f)),u.length>i?u.slice(0,i):u}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:t.call(this,e,r)}:t,[function(t,r){var a=s(this),i=void 0==t?void 0:t[e];return void 0!==i?i.call(t,a,r):n.call(String(a),t,r)},function(e,a){var s=r(n,this,e,a,n!==t);if(s.done)return s.value;var m=i(this),d=String(e),f=o(m,RegExp),h=m.unicode,g=(m.ignoreCase?"i":"")+(m.multiline?"m":"")+(m.unicode?"u":"")+(p?"g":"y"),x=new f(p?"^(?:"+m.source+")":m,g),y=void 0===a?b:a>>>0;if(0===y)return[];if(0===d.length)return null===u(x,d)?[d]:[];var w=0,F=0,_=[];while(F<d.length){x.lastIndex=p?0:F;var k,$=u(x,p?d.slice(F):d);if(null===$||(k=v(l(x.lastIndex+(p?F:0)),d.length))===w)F=c(d,F,h);else{if(_.push(d.slice(w,F)),_.length===y)return _;for(var E=1;E<=$.length-1;E++)if(_.push($[E]),_.length===y)return _;F=w=k}}return _.push(d.slice(w)),_}]}),!g,p)},"159b":function(e,t,r){var n=r("da84"),a=r("fdbc"),i=r("17c2"),s=r("9112");for(var o in a){var c=n[o],l=c&&c.prototype;if(l&&l.forEach!==i)try{s(l,"forEach",i)}catch(u){l.forEach=i}}},"17c2":function(e,t,r){"use strict";var n=r("b727").forEach,a=r("a640"),i=a("forEach");e.exports=i?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},"1c0b":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},"1ce5":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mainbox"},[r("el-tabs",{attrs:{value:"first"}},[r("el-tab-pane",{attrs:{label:"xmind导入",name:"first"}},[r("uploadXmind")],1),r("el-tab-pane",{attrs:{label:"手工创建",name:"second"}},[r("div",{staticClass:"main"},[r("div",{staticClass:"header"},[r("p",[e._v("创建测试用例")]),r("el-divider")],1),r("div",{staticClass:"form"},[r("el-form",{ref:"caseForm",attrs:{model:e.caseForm,size:"mini","label-width":"30%",rules:e.caseRules}},[r("el-form-item",{attrs:{label:"用例编号:",prop:"no"}},[r("el-input",{model:{value:e.caseForm.no,callback:function(t){e.$set(e.caseForm,"no",t)},expression:"caseForm.no"}})],1),r("el-form-item",{attrs:{label:"用例名称:",prop:"name"}},[r("el-input",{model:{value:e.caseForm.name,callback:function(t){e.$set(e.caseForm,"name",t)},expression:"caseForm.name"}})],1),r("el-form-item",{attrs:{label:"归属模块:",prop:"module"}},[r("el-cascader",{ref:"cascader",attrs:{options:e.$store.state.modules,expandTrigger:"hover",props:{checkStrictly:!0,emitPath:!1,value:"id",label:"name",children:"subs"},clearable:""},on:{change:e.handleChange},model:{value:e.caseForm.module,callback:function(t){e.$set(e.caseForm,"module",t)},expression:"caseForm.module"}}),r("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:function(t){e.dialogVisible=!0}}})],1),r("el-form-item",{attrs:{label:"优先级:",prop:"priority"}},[r("el-select",{model:{value:e.caseForm.priority,callback:function(t){e.$set(e.caseForm,"priority",t)},expression:"caseForm.priority"}},e._l(e.$store.state.priorities,(function(e){return r("el-option",{key:e[0],attrs:{label:e[1],value:e[0]}})})),1)],1),r("el-form-item",{attrs:{label:"自动化:",prop:"is_auto"}},[r("el-select",{model:{value:e.caseForm.is_auto,callback:function(t){e.$set(e.caseForm,"is_auto",t)},expression:"caseForm.is_auto"}},[r("el-option",{attrs:{label:"是",value:!0}}),r("el-option",{attrs:{label:"否",value:!1}})],1)],1),e.caseForm.is_auto?r("el-form-item",{attrs:{label:"自动化脚本路径:",prop:"path"}},[r("el-input",{model:{value:e.caseForm.path,callback:function(t){e.$set(e.caseForm,"path",t)},expression:"caseForm.path"}})],1):e._e(),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.caseForm.is_auto,expression:"caseForm.is_auto"}],attrs:{label:"自动化版本:"}},[r("el-input",{model:{value:e.caseForm.version,callback:function(t){e.$set(e.caseForm,"version",t)},expression:"caseForm.version"}})],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.caseForm.is_auto,expression:"caseForm.is_auto"}],attrs:{label:"自动化类型:"}},[r("el-input",{model:{value:e.caseForm.type,callback:function(t){e.$set(e.caseForm,"type",t)},expression:"caseForm.type"}})],1),r("el-form-item",{attrs:{label:"用例描述:"}},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:3}},model:{value:e.caseForm.description,callback:function(t){e.$set(e.caseForm,"description",t)},expression:"caseForm.description"}})],1),r("el-form-item",{attrs:{label:"测试步骤:"}},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:5}},model:{value:e.caseForm.step,callback:function(t){e.$set(e.caseForm,"step",t)},expression:"caseForm.step"}})],1),r("el-form-item",{attrs:{label:"预期结果:"}},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:2}},model:{value:e.caseForm.expectation,callback:function(t){e.$set(e.caseForm,"expectation",t)},expression:"caseForm.expectation"}})],1)],1),r("div",{staticClass:"footer"},[r("el-button",{attrs:{size:"mini"},on:{click:function(t){e.caseForm={}}}},[e._v("重 置")]),r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.create_submit()}}},[e._v("保 存")])],1)],1)])])],1),r("el-dialog",{attrs:{title:"新增模块",visible:e.dialogVisible,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"subForm",attrs:{model:e.subForm,"label-width":"25%",size:"mini",rules:e.subRules}},[r("el-form-item",{attrs:{label:"父级模块:"}},[r("el-cascader",{ref:"cascader",attrs:{options:e.improve_modules(),expandTrigger:"hover",props:{checkStrictly:!0,emitPath:!1,value:"id",label:"name",children:"subs"},clearable:""},on:{change:e.handleChange},model:{value:e.subForm.parent,callback:function(t){e.$set(e.subForm,"parent",t)},expression:"subForm.parent"}})],1),r("el-form-item",{attrs:{label:"模块名称:",prop:"name"}},[r("el-input",{model:{value:e.subForm.name,callback:function(t){e.$set(e.subForm,"name",t)},expression:"subForm.name"}})],1)],1),r("div",{staticStyle:{"text-align":"right","margin-top":"2em","margin-right":"1em"}},[r("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.create_module()}}},[e._v("保 存")])],1)],1)],1)},a=[],i=(r("159b"),r("b0c0"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"upload"},[r("div",{staticClass:"clear"},[r("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.$refs.upload.clearFiles()}}},[e._v("清空列表")])],1),r("el-upload",{ref:"upload",staticStyle:{width:"30%","min-height":"8em","margin-bottom":"1em"},attrs:{action:"",multiple:"",accept:".xmind",limit:5,"on-exceed":e.handleLimit,"on-change":e.handleChange,"on-success":e.handleSuccess,"on-error":e.handleError,"http-request":e.handleHttpRequest,"auto-upload":!1}},[r("el-button",{attrs:{slot:"trigger",size:"mini",type:"primary"},slot:"trigger"},[e._v("选取文件")]),r("el-button",{staticStyle:{margin:"0 2em"},attrs:{size:"mini",type:"success"},on:{click:function(t){return e.submit()}}},[e._v("点击上传")]),r("el-link",{staticStyle:{"padding-top":"0.5em"},attrs:{size:"mini",icon:"el-icon-download",type:"primary"},on:{click:e.download_xmind_template}},[e._v("xmind 模版")]),r("el-button",{directives:[{name:"show",rawName:"v-show",value:e.ids.length>0,expression:"ids.length > 0"}],staticStyle:{"margin-left":"2em"},attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.$router.push({name:"job_create",params:{ids:e.ids}})}}},[e._v("同步创建任务")]),e.loading?r("span",{staticStyle:{"margin-left":"1em",color:"grey","margin-bottom":"0"}},[r("i",{staticClass:"el-icon-loading",attrs:{slot:"suffix"},slot:"suffix"}),e._v("用例导入中··· ")]):e._e(),r("div",{staticClass:"tips",attrs:{slot:"tip"},slot:"tip"},[e._v("提示: 只能上传xmind文件")])],1),r("transition",{attrs:{name:"el-zoom-in-top"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"result"},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.title.replace(/[\r\n]/g,""),expression:"title.replace(/[\\r\\n]/g,'')"}]},[r("span",{staticClass:"title"},[e._v(e._s(e.title))])]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.error.replace(/[\r\n]/g,""),expression:"error.replace(/[\\r\\n]/g,'')"}]},[r("span",{staticClass:"title"},[r("br"),e._v("导入异常: "),r("br")]),r("span",[e._v(e._s(e.error))])]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.success.replace(/[\r\n]/g,""),expression:"success.replace(/[\\r\\n]/g,'')"}]},[r("span",{staticClass:"title"},[r("br"),e._v("用例详情: "),r("br")]),r("span",[e._v(e._s(e.success))])])])])],1)}),s=[],o=r("1da1"),c=(r("fb6a"),r("a434"),r("a15b"),r("99af"),r("ac1f"),r("1276"),r("96cf"),r("365c")),l={props:[],data:function(){return{title:"",error:"",success:"",count:0,show:!1,loading:!1,ids:[]}},methods:{handleHttpRequest:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.loading=!0,n=new FormData,n.append("file",e.file),r.next=5,Object(c["E"])(n);case 5:a=r.sent,t.show=!0,t.loading=!1,201==a.status&&e.onSuccess(a),200==a.status&&e.onError(a);case 10:case"end":return r.stop()}}),r)})))()},submit:function(){this.show=!1,this.clearResult(),this.$refs.upload.submit()},handleChange:function(e,t){if("ready"==e.status)for(var r=0;r<t.slice(0,-1).length;r++)if(t[r].name==e.name){this.$message({type:"error",message:"同名的文件已存在"}),t.splice(-1,1);break}},handleLimit:function(){this.$message({type:"warning",message:"上传文件数已达上限"})},handleSuccess:function(e,t,r){this.count+=e.data.count,this.title="导入用例: ".concat(this.count),this.success+=e.data.success.join("\n")+"\n",this.ids=this.ids.concat(e.data.ids),this.$store.dispatch("caseTree")},handleError:function(e,t,r){this.error+=e.data.error+"\n"},clearResult:function(){this.title="",this.error="",this.success="",this.count=0,this.show=!1},download_xmind_template:function(){Object(c["l"])(this.$store.state.xmind_template_id).then((function(e){var t=e.data,r=new FileReader;r.readAsDataURL(t),r.onload=function(t){var r=document.createElement("a"),n=e.headers["content-dispositon"].split("=");console.log(n),r.download=n[n.length-1],r.setAttribute("href",t.target.result),document.body.appendChild(r),r.click(),document.body.removeChild(r)}}))}}},u=l,m=(r("5aff"),r("2877")),d=Object(m["a"])(u,i,s,!1,null,"1287c4f1",null),f=d.exports,p={data:function(){var e=function(e,t,r){t&&Object(c["z"])(null,t).then((function(e){"用例不存在"==e.data.msg&&r(),r(new Error("用例编号已存在"))})),r()};return{caseForm:{},caseRules:{no:[{validator:e,trigger:"blur"}],name:[{required:!0,message:"该项为必填",trigger:"blur"}],module:[{required:!0,message:"该项为必填",trigger:"blur"}],priority:[{required:!0,message:"该项为必填",trigger:"blur"}],is_auto:[{required:!0,message:"该项为必填",trigger:"blur"}],path:[{required:!0,message:"该项为必填",trigger:"blur"}]},dialogVisible:!1,subForm:{},subRules:{name:[{required:!0,message:"该项为必填",trigger:"blur"}]}}},methods:{create_submit:function(){var e=this;this.$refs.caseForm.validate((function(t){t&&Object(c["d"])(e.caseForm).then((function(t){e.$message({type:"success",message:t.data.msg}),e.$store.dispatch("caseTree")}))}))},improve_modules:function(){var e=JSON.parse(JSON.stringify(this.$store.state.modules));return e.forEach((function(e){e.subs&&e.subs.forEach((function(e){e.subs=null}))})),e},create_module:function(){var e=this;this.$refs.subForm.validate((function(t){t&&Object(c["f"])(e.subForm).then((function(t){e.$message({type:"success",message:"模块[".concat(t.data.name,"]创建成功")}),e.subForm={},e.dialogVisible=!1,Object(c["y"])().then((function(t){e.$store.commit("setModules",t.data)}))}))}))},handleChange:function(){this.$refs.cascader.dropDownVisible=!1}},components:{uploadXmind:f}},h=p,v=(r("d8a4"),Object(m["a"])(h,n,a,!1,null,"e5275a5c",null));t["default"]=v.exports},"1dde":function(e,t,r){var n=r("d039"),a=r("b622"),i=r("2d00"),s=a("species");e.exports=function(e){return i>=51||!n((function(){var t=[],r=t.constructor={};return r[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"44e7":function(e,t,r){var n=r("861d"),a=r("c6b6"),i=r("b622"),s=i("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==a(e))}},4840:function(e,t,r){var n=r("825a"),a=r("1c0b"),i=r("b622"),s=i("species");e.exports=function(e,t){var r,i=n(e).constructor;return void 0===i||void 0==(r=n(i)[s])?t:a(r)}},"5aff":function(e,t,r){"use strict";r("64c8")},"64c8":function(e,t,r){},"65f0":function(e,t,r){var n=r("861d"),a=r("e8b5"),i=r("b622"),s=i("species");e.exports=function(e,t){var r;return a(e)&&(r=e.constructor,"function"!=typeof r||r!==Array&&!a(r.prototype)?n(r)&&(r=r[s],null===r&&(r=void 0)):r=void 0),new(void 0===r?Array:r)(0===t?0:t)}},8418:function(e,t,r){"use strict";var n=r("c04e"),a=r("9bf2"),i=r("5c6c");e.exports=function(e,t,r){var s=n(t);s in e?a.f(e,s,i(0,r)):e[s]=r}},"99af":function(e,t,r){"use strict";var n=r("23e7"),a=r("d039"),i=r("e8b5"),s=r("861d"),o=r("7b0b"),c=r("50c4"),l=r("8418"),u=r("65f0"),m=r("1dde"),d=r("b622"),f=r("2d00"),p=d("isConcatSpreadable"),h=9007199254740991,v="Maximum allowed index exceeded",b=f>=51||!a((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),g=m("concat"),x=function(e){if(!s(e))return!1;var t=e[p];return void 0!==t?!!t:i(e)},y=!b||!g;n({target:"Array",proto:!0,forced:y},{concat:function(e){var t,r,n,a,i,s=o(this),m=u(s,0),d=0;for(t=-1,n=arguments.length;t<n;t++)if(i=-1===t?s:arguments[t],x(i)){if(a=c(i.length),d+a>h)throw TypeError(v);for(r=0;r<a;r++,d++)r in i&&l(m,d,i[r])}else{if(d>=h)throw TypeError(v);l(m,d++,i)}return m.length=d,m}})},a15b:function(e,t,r){"use strict";var n=r("23e7"),a=r("44ad"),i=r("fc6a"),s=r("a640"),o=[].join,c=a!=Object,l=s("join",",");n({target:"Array",proto:!0,forced:c||!l},{join:function(e){return o.call(i(this),void 0===e?",":e)}})},a434:function(e,t,r){"use strict";var n=r("23e7"),a=r("23cb"),i=r("a691"),s=r("50c4"),o=r("7b0b"),c=r("65f0"),l=r("8418"),u=r("1dde"),m=u("splice"),d=Math.max,f=Math.min,p=9007199254740991,h="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!m},{splice:function(e,t){var r,n,u,m,v,b,g=o(this),x=s(g.length),y=a(e,x),w=arguments.length;if(0===w?r=n=0:1===w?(r=0,n=x-y):(r=w-2,n=f(d(i(t),0),x-y)),x+r-n>p)throw TypeError(h);for(u=c(g,n),m=0;m<n;m++)v=y+m,v in g&&l(u,m,g[v]);if(u.length=n,r<n){for(m=y;m<x-n;m++)v=m+n,b=m+r,v in g?g[b]=g[v]:delete g[b];for(m=x;m>x-n+r;m--)delete g[m-1]}else if(r>n)for(m=x-n;m>y;m--)v=m+n-1,b=m+r-1,v in g?g[b]=g[v]:delete g[b];for(m=0;m<r;m++)g[m+y]=arguments[m+2];return g.length=x-n+r,u}})},a640:function(e,t,r){"use strict";var n=r("d039");e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){throw 1},1)}))}},b0c0:function(e,t,r){var n=r("83ab"),a=r("9bf2").f,i=Function.prototype,s=i.toString,o=/^\s*function ([^ (]*)/,c="name";n&&!(c in i)&&a(i,c,{configurable:!0,get:function(){try{return s.call(this).match(o)[1]}catch(e){return""}}})},b727:function(e,t,r){var n=r("0366"),a=r("44ad"),i=r("7b0b"),s=r("50c4"),o=r("65f0"),c=[].push,l=function(e){var t=1==e,r=2==e,l=3==e,u=4==e,m=6==e,d=7==e,f=5==e||m;return function(p,h,v,b){for(var g,x,y=i(p),w=a(y),F=n(h,v,3),_=s(w.length),k=0,$=b||o,E=t?$(p,_):r||d?$(p,0):void 0;_>k;k++)if((f||k in w)&&(g=w[k],x=F(g,k,y),e))if(t)E[k]=x;else if(x)switch(e){case 3:return!0;case 5:return g;case 6:return k;case 2:c.call(E,g)}else switch(e){case 4:return!1;case 7:c.call(E,g)}return m?-1:l||u?u:E}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterOut:l(7)}},c688:function(e,t,r){},d8a4:function(e,t,r){"use strict";r("c688")},e8b5:function(e,t,r){var n=r("c6b6");e.exports=Array.isArray||function(e){return"Array"==n(e)}},fb6a:function(e,t,r){"use strict";var n=r("23e7"),a=r("861d"),i=r("e8b5"),s=r("23cb"),o=r("50c4"),c=r("fc6a"),l=r("8418"),u=r("b622"),m=r("1dde"),d=m("slice"),f=u("species"),p=[].slice,h=Math.max;n({target:"Array",proto:!0,forced:!d},{slice:function(e,t){var r,n,u,m=c(this),d=o(m.length),v=s(e,d),b=s(void 0===t?d:t,d);if(i(m)&&(r=m.constructor,"function"!=typeof r||r!==Array&&!i(r.prototype)?a(r)&&(r=r[f],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return p.call(m,v,b);for(n=new(void 0===r?Array:r)(h(b-v,0)),u=0;v<b;v++,u++)v in m&&l(n,u,m[v]);return n.length=u,n}})}}]);
//# sourceMappingURL=chunk-b8ea2402.ba446a12.js.map